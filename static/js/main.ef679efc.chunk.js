(this["webpackJsonpten-steps"]=this["webpackJsonpten-steps"]||[]).push([[0],{22:function(e,t,n){e.exports=n(36)},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),i=(n(27),n(11)),s=n(6),l=n(8),u=n(2),m=(r.a.createContext(null),u),f=n(21),p=n(18),h=n.n(p),d="tensteps",g="".concat(99999*Math.random());function E(e){!function(){var e,t,n=arguments;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t=n.length>1&&void 0!==n[1]?n[1]:{},a.abrupt("return",fetch(e,{method:"POST",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}));case 3:case"end":return a.stop()}}))}("https://goeieware.ca/m",Object(f.a)({},e,{appId:d,sessionId:g}))}window.addEventListener("beforeunload",(function(){E({action:"departed"})}));var v=E,b=function(){return Object(a.useEffect)((function(){v({action:"arrived"})}),[]),r.a.createElement("p",null,"This app demonstrates proceedural music generation. A song invented on the fly. It begins with a series of monotonous beeps, and grows into something resembling music. Written in Javascript using simple algorithms and elementary music theory.")},w=(n(29),function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)(u.Transport.position),l=Object(i.a)(s,2),m=l[0],f=l[1];Object(a.useEffect)((function(){v({example:e.label,action:"load"})}),[e.label]),Object(a.useEffect)((function(){u.Transport.position=0,u.Transport.setLoopPoints(0,e.length),u.Transport.loop=!0}),[e.length]);return Object(a.useEffect)((function(){var t=u.Transport.scheduleRepeat((function(){f(u.Transport.position.split(".")[0])}),"128n","0m");return function(){u.Transport.clear(t),u.Transport.stop(),v({example:e.label,action:"left"})}}),[e.label]),r.a.createElement("div",{className:"transport"},r.a.createElement("div",{className:"display"},m),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"play",onClick:function(){v({example:e.label,action:"play"}),u.Transport.start(),c(!0)},disabled:o},"play"),r.a.createElement("button",{className:"loop",onClick:function(){v({example:e.label,action:"play"}),c(!0),u.Transport.start()},disabled:o},"play"),r.a.createElement("button",{onClick:function(){v({example:e.label,action:"stop"}),u.Transport.stop(),c(!1)},disabled:!o},"stop")))});function y(){return(new m.Synth).toMaster()}function x(){var e=new m.Synth({oscillator:{type:"square4"}}).toMaster();return e.volume.value=-10,e}function j(){return new m.Synth({oscillator:{type:"amtriangle",harmonicity:.5,modulationType:"sine"},envelope:{attackCurve:"exponential",attack:.05,decay:.2,sustain:.2,release:1.5},portamento:.025}).toMaster()}var C=function(){return Object(a.useEffect)((function(){var e=new y,t=new m.Loop((function(t){e.triggerAttackRelease("C4","4n",t)}),"4n");return t.start("0m").stop("1m"),function(){e.dispose(),t.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Beep beep beep beep",r.a.createElement("strong",null,"...")),r.a.createElement(w,{length:"1m",label:"1"}))},O=function(){return Object(a.useEffect)((function(){var e=new y,t=["C4","D4","E4","F4"],n=new m.Loop((function(n){e.triggerAttackRelease(t[t.push(t.shift())-1],"4n",n)}),"4n");return n.start("0m").stop("1m"),function(){e.dispose(),n.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Do re mi fa"),"..."),r.a.createElement(w,{length:"1m",label:"2"}))},k=function(){var e="1m";return Object(a.useEffect)((function(){var t=new y,n=["C4","D4","E4","F4"],a=new m.Loop((function(e){t.triggerAttackRelease(function(){var e=Math.floor(Math.random()*n.length);return n[e]}(),"4n",e)}),"4n");return a.start("0m").stop(e),function(){t.dispose(),a.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Do re mi fa... ",r.a.createElement("strong",null,"randomly.")),r.a.createElement(w,{length:e,label:"3"}))},N=function(){var e="1m";return Object(a.useEffect)((function(){var t=new x,n=["C4","D4","E4","F4"],a=new m.Loop((function(e){var a;t.triggerAttackRelease((a=n)[Math.floor(Math.random()*a.length)],"4n",e)}),"4n");return a.start("0m").stop(e),function(){t.dispose(),a.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Do re mi fa... randomly, using a ",r.a.createElement("strong",null,"different synth"),"."),r.a.createElement(w,{length:e,label:"4"}))},S=function(){var e="1m";return Object(a.useEffect)((function(){var t=[new y,new x],n=["C4","D4","E4","F4"],a=function(e){return e[Math.floor(Math.random()*e.length)]},r=new m.Loop((function(e){a(t).triggerAttackRelease(a(n),"4n",e)}),"4n");return r.start("0m").stop(e),function(){t.forEach((function(e){return e.dispose()})),r.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Do re mi fa... randomly, using ",r.a.createElement("strong",null,"two")," different synths."),r.a.createElement(w,{length:e,label:"5"}))},A={2:[2,1],3:[3,2],4:[4,3],5:[5,3],6:[6,5],7:[7,6],8:[8,6,5,4],9:[9,5],10:[10,7],11:[11,9],12:[12,11,10,4],13:[13,12,11,8],14:[14,13,12,2],15:[15,14],16:[16,14,13,11],17:[17,14],18:[18,11],19:[19,18,17,14],20:[20,17],21:[21,19],22:[22,21],23:[23,18],24:[24,23,22,17],25:[25,22],26:[26,6,2,1],27:[27,5,2,1],28:[28,25],29:[29,27],30:[30,6,4,1],31:[31,28]};function M(e,t){this.n=e||this.DEFAULT_LENGTH,this.taps=A[this.n],t||(t=this._defaultSeed(this.n));var n=parseInt(Array(this.n+1).join("1"),2);this.register=t&n}M.prototype={TAPS:A,DEFAULT_LENGTH:31,shift:function(){var e,t=this.taps.length,n=this.register>>this.n-this.taps[0];for(e=1;e<t;e++)n^=this.register>>this.n-this.taps[e];return n&=1,this.register=this.register>>1|n<<this.n-1,1&n},seq:function(e){for(var t=0,n=0;n<e;n++)t=t<<1|this.shift();return t},seqString:function(e){for(var t="",n=0;n<e;n++)t+=this.shift();return t},maxSeqLen:function(){var e=this.register,t=0;do{this.shift(),t++}while(e!==this.register);return t},_defaultSeed:function(e){if(!e)throw new Error("n is required");return new M(8,92914).seq(e)}};var T=M,L=function(){var e="1m";function t(e){var t=parseInt(e,2);return new T(e.length,t)}return Object(a.useEffect)((function(){var n=[new y,new x,new j],a=t("1001"),r=["C4","D4","E4","F4"],o=t("1001"),c=function(e,t){return e.shift(),t[e.register%t.length]},i=new m.Loop((function(e){c(a,n).triggerAttackRelease(c(o,r),"4n",e)}),"4n");return i.start("0m").stop(e),function(){n.forEach((function(e){return e.dispose()})),i.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Do re mi fa... ",r.a.createElement("strong",null,"deterministically"),", using"," ",r.a.createElement("strong",null,"three")," different synths.",r.a.createElement("span",{"aria-label":"musical notes",role:"img"},"\ud83c\udfb6"),"..."),r.a.createElement(w,{length:e,label:"6"}))},I=n(4),R=function(e){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.exec(e),n=t[1],a=t[2];return{cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13}[n.toLowerCase()]+12*(parseInt(a,10)+1)},F=function(){var e="1m";function t(e){var t=parseInt(e,2);return new T(e.length,t)}var n=function(e){return[0,4,7].map((function(t){return m.Frequency(R(e)+t,"midi")}))};return Object(a.useEffect)((function(){var a=[new y,new x,new j],r=t("1001"),o=[].concat(Object(I.a)(n("C4")),Object(I.a)(n("F4"))),c=t("1001"),i=function(e,t){return e.shift(),t[e.register%t.length]},s=new m.Loop((function(e){i(r,a).triggerAttackRelease(i(c,o),"4n",e)}),"4n");return s.start("0m").stop(e),function(){a.forEach((function(e){return e.dispose()})),s.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Six notes of I and IV"),"... deterministically, using three different synths."),r.a.createElement(w,{length:e,label:"7"}))},D=function(){var e="1m";function t(e){var t=parseInt(e,2);return new T(e.length,t)}var n=function(e){return[0,4,7].map((function(t){return m.Frequency(R(e)+t,"midi")}))};return Object(a.useEffect)((function(){var a=[new y,new x,new j],r=t("1001"),o=[].concat(Object(I.a)(n("C4")),Object(I.a)(n("F4"))),c=t("1001"),i=function(e,t,n){return e.shift(),t[e.register%(t.length+(n||0))]},s=new m.Loop((function(e){var t=i(r,a,1);t&&t.triggerAttackRelease(i(c,o),"4n",e)}),"4n");return s.start("0m").stop(e),function(){a.forEach((function(e){return e.dispose()})),s.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Six notes of I and IV ",r.a.createElement("strong",null,"with rests"),"... deterministically, using three different synths."),r.a.createElement(w,{length:e,label:"8"}))},q=function(){var e="1m";function t(){return(new m.MembraneSynth).toMaster()}function n(){return(new m.NoiseSynth).toMaster()}function o(){var e=(new m.MetalSynth).toMaster();return e.volume.value=-20,e}function c(e){var t=parseInt(e,2);return new T(e.length,t)}var i=function(e){return[0,4,7].map((function(t){return m.Frequency(R(e)+t,"midi")}))},s=function(e){return Math.random()*e+(1-e)};return Object(a.useEffect)((function(){var a=[new y,new x,new j],r=c("100101"),l=[new t,new n,new o],u=[function(e){return l[0].triggerAttackRelease("C1","4n",e,s(.25))},function(e){return l[1].triggerAttackRelease("2n",e,s(.25))},function(e){return l[2].triggerAttackRelease("8n",e,s(.5))}],f=c("100101"),p=[].concat(Object(I.a)(i("C4")),Object(I.a)(i("F4"))),h=c("100101"),d=function(e,t,n){return e.shift(),t[e.register%(t.length+(n||0))]},g=new m.Loop((function(e){var t=d(r,a,1);t&&t.triggerAttackRelease(d(h,p),"4n",e)}),"4n");g.start("0m").stop(e);var E=new m.Loop((function(e){var t=d(f,u,1);t&&t(e)}),"4n");return E.start("0m").stop(e),function(){a.forEach((function(e){return e.dispose()})),l.forEach((function(e){return e.dispose()})),g.dispose(),E.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Six notes of I and IV with rests... deterministically, using three different synths and ",r.a.createElement("strong",null,"three percussion sounds"),"."),r.a.createElement(w,{length:e,label:"9"}))},J=function(){var e="1m";function t(){return(new m.MembraneSynth).toMaster()}function n(){return(new m.NoiseSynth).toMaster()}function o(){var e=(new m.MetalSynth).toMaster();return e.volume.value=-20,e}function c(e){var t=parseInt(e,2);return new T(e.length,t)}var i=function(e){return[0,4,7].map((function(t){return m.Frequency(R(e)+t,"midi")}))},s=function(e){return Math.random()*e+(1-e)};return Object(a.useEffect)((function(){var a=[new y,new x,new j],r=c("1001"),l=[new t,new n,new o],u=[function(e){return l[0].triggerAttackRelease("C1","4n",e,s(.25))},function(e){return l[1].triggerAttackRelease("2n",e,s(.25))},function(e){return l[2].triggerAttackRelease("8n",e,s(.5))}],f=c("1001"),p=[].concat(Object(I.a)(i("C4")),Object(I.a)(i("F4"))),h=c("1001"),d=function(e,t,n){return e.shift(),t[e.register%(t.length+(n||0))]},g=new m.Loop((function(e){var t=d(r,a,1);t&&t.triggerAttackRelease(d(h,p),"4n",e)}),"4n");g.start("0m").stop(e);var E=new m.Loop((function(e){var t=d(f,u,1);t&&t(e)}),"8n");return E.start("0m").stop(e),function(){a.forEach((function(e){return e.dispose()})),l.forEach((function(e){return e.dispose()})),g.dispose(),E.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Six notes of I and IV with rests... deterministically, using three different synths and three percussion sounds, with"," ",r.a.createElement("strong",null,"percussion played twice as frequently"),"."),r.a.createElement(w,{length:e,label:"10"}))},P="/",V="/example-1",_="/example-2",B="/example-3",W="/example-4",G="/example-5",H="/example-6",U="/example-7",$="/example-8",z="/example-9",K="/example-10";n(30);var Q=function(e){var t=Object(a.useState)("suspended"===m.context.state),n=Object(i.a)(t,2),o=n[0],c=n[1];return o?r.a.createElement("main",{className:"app"},r.a.createElement("div",{className:"source"},r.a.createElement("a",{href:"https://github.com/abrie/ten-steps"},"source code")),r.a.createElement("h1",null,"Ten Steps to an Algorithmic Song"),r.a.createElement("hr",null),r.a.createElement(s.a,{basename:"/"},r.a.createElement("nav",{className:"examplesNav"},r.a.createElement(s.b,{to:V,activeClassName:"active"},"1"),r.a.createElement(s.b,{to:_,activeClassName:"active"},"2"),r.a.createElement(s.b,{to:B,activeClassName:"active"},"3"),r.a.createElement(s.b,{to:W,activeClassName:"active"},"4"),r.a.createElement(s.b,{to:G,activeClassName:"active"},"5"),r.a.createElement(s.b,{to:H,activeClassName:"active"},"6"),r.a.createElement(s.b,{to:U,activeClassName:"active"},"7"),r.a.createElement(s.b,{to:$,activeClassName:"active"},"8"),r.a.createElement(s.b,{to:z,activeClassName:"active"},"9"),r.a.createElement(s.b,{to:K,activeClassName:"active"},"10")),r.a.createElement("hr",null),r.a.createElement("section",{className:"activeExample"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:P,component:b}),r.a.createElement(l.a,{path:V,component:C}),r.a.createElement(l.a,{path:_,component:O}),r.a.createElement(l.a,{path:B,component:k}),r.a.createElement(l.a,{path:W,component:N}),r.a.createElement(l.a,{path:G,component:S}),r.a.createElement(l.a,{path:H,component:L}),r.a.createElement(l.a,{path:U,component:F}),r.a.createElement(l.a,{path:$,component:D}),r.a.createElement(l.a,{path:z,component:q}),r.a.createElement(l.a,{path:K,component:J}))))):r.a.createElement("button",{onClick:function(){m.start().then((function(){return c(!0)}))}},"click to permit AudioContext")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.ef679efc.chunk.js.map